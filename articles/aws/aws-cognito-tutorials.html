<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://www.archerimagine.com/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://www.archerimagine.com/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link rel="alternate" type="application/rss+xml" title="Archer Imagine" href="https://www.archerimagine.com/feeds/all.atom.xml" />

        <meta name="google-site-verification" content="6B1Foj8HxdrASteMuBQX7Hyu6PCLUQCX_u4USDQ9xi8" />        <meta name="msvalidate.01" content="7186CB4D245BAA0092329C7B5FD2C5CD" />        <meta name="author" content="Animesh Bhadra" />

        <meta name="description" content="Create a highly secure web application, by offloading user management, Social sign-in, login along with data sync across devices onto AWS Cognito. This is an intense AWS Cognito tutorial, which will explain about user pool, and identity pool. How to use the user pool with identity pool. We will even write a Python code, to implement the basic AWS Cognito API, using Boto3 SDK.
" />
        <meta name="twitter:creator" content="@animeshkbhadra">
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary_large_image">

<meta name="keywords" content="aws, cloud, aws-cognito, aws, aws Cognito tutorial, aws Cognito documentation, aws Cognito status, aws Cognito pricing, aws Cognito user pool, aws Cognito saml, aws Cognito sso, aws Cognito example, aws Cognito Identity pool, Social Sign-in, OIDC, SAML, SSO, AWS Cognito user directory, fine-grained IAM role, aws Cognito jwt" />

<meta property="og:title" content="How to start using AWS Cognito  - Authorize, Authenticate and Federate user in [2021] "/>
<meta property="og:url" content="https://www.archerimagine.com/articles/aws/aws-cognito-tutorials.html" />
<meta property="og:description" content="Create a highly secure web application, by offloading user management, Social sign-in, login along with data sync across devices onto AWS Cognito. This is an intense AWS Cognito tutorial, which will explain about user pool, and identity pool. How to use the user pool with identity pool. We will even write a Python code, to implement the basic AWS Cognito API, using Boto3 SDK." />
<meta property="og:site_name" content="Archer Imagine" />
<meta property="og:article:author" content="Animesh Bhadra" />
<meta property="og:article:published_time" content="2021-04-17T14:16:23+05:30" />
<meta property="og:article:modified_time" content="2021-05-28T16:54:39+05:30" />
<meta name="twitter:title" content="How to start using AWS Cognito  - Authorize, Authenticate and Federate user in [2021] ">
<meta name="twitter:description" content="Create a highly secure web application, by offloading user management, Social sign-in, login along with data sync across devices onto AWS Cognito. This is an intense AWS Cognito tutorial, which will explain about user pool, and identity pool. How to use the user pool with identity pool. We will even write a Python code, to implement the basic AWS Cognito API, using Boto3 SDK.">
<meta property="og:image" content="https://www.archerimagine.com/images/aws/IAM/09-AWS-Cognito.png" />
<meta name="twitter:image" content="https://www.archerimagine.com/images/aws/IAM/09-AWS-Cognito.png" >

        <title>How to start using AWS Cognito  - Authorize, Authenticate and Federate user in [2021]  Â· Archer Imagine
</title>
        <link rel="shortcut icon" href="https://www.archerimagine.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="https://www.archerimagine.com/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link rel="apple-touch-icon" href="https://www.archerimagine.com/theme/images/apple-touch-icon.png"  type="image/png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://www.archerimagine.com/theme/images/apple-touch-icon-57x57.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://www.archerimagine.com/theme/images/apple-touch-icon-72x72.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="76x76" href="https://www.archerimagine.com/theme/images/apple-touch-icon-76x76.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://www.archerimagine.com/theme/images/apple-touch-icon-114x114.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="120x120" href="https://www.archerimagine.com/theme/images/apple-touch-icon-120x120.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://www.archerimagine.com/theme/images/apple-touch-icon-144x144.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="152x152" href="https://www.archerimagine.com/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="152x152" href="https://www.archerimagine.com/theme/images/apple-touch-icon-180x180.png" type="image/png" />
        <link href="https://www.archerimagine.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Archer Imagine - Full Atom Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-97386090-1', 'auto');
    ga('send', 'pageview');
</script>


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://www.archerimagine.com/"><span class=site-name>Archer Imagine</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://www.archerimagine.com
                                    >Home</a>
                                </li>
                                <li ><a href="https://www.archerimagine.com/pages/aws-certification.html">Tutorials</a></li>
                                <li ><a href="https://www.archerimagine.com/categories">Categories</a></li>
                                <li ><a href="https://www.archerimagine.com/tags">Tags</a></li>
                                <li ><a href="https://www.archerimagine.com/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://www.archerimagine.com/search" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://www.archerimagine.com/articles/aws/aws-cognito-tutorials.html">
                How to start using AWS Cognito
                <small class="subtitle">
                    Authorize, Authenticate and Federate user in [2021]
                </small>
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-amazon-cognito">What Is Amazon Cognito?</a></li>
<li><a href="#basics-of-identity-and-access-management-iam">Basics of Identity and Access Management (IAM)</a><ul>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#authorization">Authorization</a></li>
<li><a href="#federation">Federation</a></li>
</ul>
</li>
<li><a href="#user-pool">User Pool</a><ul>
<li><a href="#configure-user-pool">Configure User Pool</a></li>
<li><a href="#create-a-user-pool-default">Create a User Pool (Default)</a></li>
<li><a href="#add-an-app-to-enable-the-hosted-web-ui">Add an App to Enable the Hosted Web UI</a></li>
</ul>
</li>
<li><a href="#identity-pool">Identity Pool</a><ul>
<li><a href="#configure-identity-pool">Configure Identity Pool</a></li>
</ul>
</li>
<li><a href="#python-code-for-aws-cognito">Python Code for AWS Cognito</a><ul>
<li><a href="#sign-up-using-aws-cognito-python-sdk-boto3">Sign-Up using AWS Cognito, Python SDK Boto3</a></li>
<li><a href="#confirmation-code-using-aws-cognito-python-sdk-boto3">Confirmation Code using AWS Cognito, Python SDK Boto3</a></li>
<li><a href="#login-and-getting-user-details-using-aws-cognito">Login and Getting User details using AWS Cognito</a></li>
</ul>
</li>
<li><a href="#aws-cognito-sync">AWS Cognito Sync</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#reference">Reference</a></li>
<li><a href="#info-graphics">Info graphics</a><ul>
<li><a href="#authentication-vs-authorization">Authentication Vs Authorization</a></li>
<li><a href="#aws-cognito-user-pool-vs-identity-pool">AWS Cognito User Pool Vs Identity Pool</a></li>
<li><a href="#using-aws-cognito-user-pool-with-identity-pool">Using AWS Cognito User Pool With Identity Pool</a></li>
</ul>
</li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<p><img alt="AWS Made Easy | AWS Cognito " src="https://www.archerimagine.com/images/aws/IAM/09-AWS-Cognito.png" title="AWS Made Easy | AWS Cognito"/></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">Â¶</a></h2>
<p><em>Does AWS provide any service which will offload my sign-up, login, user management responsibility?</em> </p>
<p>What if I told you, AWS has a service which does all of the above, and also provide a hosted web UI which can used by you. It even provides data sync across devices. Everything is perfectly secure. I will help you understand everything you need to know about this service.  </p>
<p>As a developer if you ever wished to focus only on the functionality or business logic of the application you are developing, and leaving the worries or sign-up, login, user management, data sync across devices in a safe and secure manner. Paying only based on the number of users per month. The AWS has answered your wish, and I will guide you through this. </p>
<p>As per AWS</p>
<blockquote>
<p>You can focus on creating great app experiences instead of worrying about building, securing, and scaling a solution to handle user management, authentication, and sync across platforms and devices.</p>
</blockquote>
<p>Let's jump right into the enticing world of AWS Cognito.</p>
<h2 id="what-is-amazon-cognito">What Is Amazon Cognito?<a class="headerlink" href="#what-is-amazon-cognito" title="Permanent link">Â¶</a></h2>
<p>The official definition from AWS:-</p>
<blockquote>
<p>Amazon Cognito provides authentication, authorization, and user management for your web and mobile apps.</p>
</blockquote>
<p>The most important concept in the above definition is <strong>authentication</strong> &amp; <strong>authorization</strong>. This is provided using two components in AWS Cognito.</p>
<ul>
<li>AWS Cognito User Pool</li>
<li>AWS Cognito Identity Pool</li>
</ul>
<p>Originally AWS Cognito was used for mobile developers, who could use AWS Cognito for its authentication &amp; authorization capabilities along with the user management.</p>
<p>AWS Lambda and ServerLess architecture have given a new dimension to use AWS Cognito. These developers can now offload user management of their application to an AWS Managed service.</p>
<blockquote>
<p>AWS Cognito provides such developer with fully managed, scalable an cost-effective sign-up/sign-in service.</p>
</blockquote>
<p>Before you jump into learning about <strong>User Pool</strong> and <strong>Identity Pool</strong>, you should have a fair understanding of the terms <strong>authentication</strong> &amp; <strong>authorization</strong>. You may also need to understand <strong>federation</strong>. </p>
<h2 id="basics-of-identity-and-access-management-iam">Basics of Identity and Access Management (IAM)<a class="headerlink" href="#basics-of-identity-and-access-management-iam" title="Permanent link">Â¶</a></h2>
<p>There is a great article by <a href="https://www.okta.com/identity-101/authentication-vs-authorization/">Okta</a>, which explains about IAM. Since you are here, I will summarize it.</p>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">Â¶</a></h3>
<p>This is the first step in the security process of identity and access management.</p>
<blockquote>
<p>Authentication is the act of validating that users are whom they claim to be. </p>
</blockquote>
<p>The most common ways to authenticate user are:</p>
<ul>
<li>User Name and password combination</li>
<li>OTPs</li>
<li>Biometrics</li>
<li>SSO (Social Sign On)</li>
</ul>
<p>Authentication tells the application <em>Who am I?</em>.</p>
<h3 id="authorization">Authorization<a class="headerlink" href="#authorization" title="Permanent link">Â¶</a></h3>
<blockquote>
<p>Authorization in a system security is the process of giving the user permission to access a specific resource or function.</p>
</blockquote>
<p>Once a person is Authenticated, you have to provide him with relevant access. Even a <strong>Guest</strong> user, can be provided with minimum access.</p>
<p>You can divide your users, into these four categories.</p>
<ul>
<li>Admin of the application</li>
<li>Authenticated User</li>
<li>Premium user (Paid)</li>
<li>Guest user</li>
</ul>
<p>An Administrator can have a different view of the application than a normal authenticated user.</p>
<p>Even an authenticated user can be free user or a premium user, depending on the type, the view of your application may be different.</p>
<p>What type of experience you want to provide your user, decides the level of access.</p>
<p>Lets understand this concept used by an analogy in most of the company. </p>
<p>Most companies in pre-covid times used to give the RFID access card to its employee. Authentication means the process by which someone receives the RFID Access card. Once you receive your RFID access card, depending on the authorization of the employee, he may or may not have access to different parts of the office buildings.</p>
<p>Hope you are clear on these questions now</p>
<ul>
<li><em>What is Authentication?</em> --&gt; This answers the question "Who am I?"</li>
<li><em>What is Authorization?</em>  --&gt; This answers the question "What I can use?"</li>
</ul>
<p>There is a third variable in this equation, which is called Federation. Lets understand <em>What is federation?</em></p>
<h3 id="federation">Federation<a class="headerlink" href="#federation" title="Permanent link">Â¶</a></h3>
<p>The word <em>federation</em>, means a united, trusted relationship between two or more entities. To understand federation properly, you have to understand few other concepts.</p>
<ul>
<li><strong>Identity Federation</strong><ul>
<li>It is a system of trust between two parties, to authenticate users and also convey the information required for giving authorization.</li>
</ul>
</li>
<li><strong>Identity provider</strong><ul>
<li>The party in identity federation, which stores the user information, responsible for user authentication.</li>
</ul>
</li>
<li><strong>Service Provider</strong><ul>
<li>The party in identity federation, which provides the service based on authentication and authorization provided by Identity provider.</li>
</ul>
</li>
<li><strong>Open Standards</strong><ul>
<li>Identity federation is possible because of these open standards<ul>
<li>OIDC (OpenID Connect)</li>
<li>SAML (Security assertion markup language) 2.0</li>
<li>OAuth 2.0</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>When you book movie ticket online, you are authenticated by an online entity, who takes your money and gives you the ticket, when you go to the actual theater you are granted entry based on the ticket, you purchased online. In this case the online ticket vendor is the <strong>Identity provider</strong>, the theater is the <strong>service provider</strong>, and the bi-party arrangement is the <strong>Identity Federation</strong>.</p>
<p><img alt="AWS Made Easy | Federation " src="https://www.archerimagine.com/images/aws/IAM/Federation.png" title="AWS Made Easy | Federation"/></p>
<p>Once the basic identity and access management is clear to you, let's move on to understand <strong>User Pool</strong> and <strong>identity pool</strong>.</p>
<h2 id="user-pool">User Pool<a class="headerlink" href="#user-pool" title="Permanent link">Â¶</a></h2>
<p>AWS Cognito <strong>User Pool</strong>, is a way to provide <strong>Authentication</strong> to user of an Application. It is represented as a user directory in Amazon Cognito. </p>
<p>The authentication mechanism provided by AWS Cognito User Pools is:-</p>
<ul>
<li>Social Identity Providers</li>
<li>SAML Identity Providers</li>
<li>AWS Cognito User Pools, also provide authentication, or act as an identity provider.</li>
</ul>
<p>In <a href="#federation">Federation</a>, as explained,  the Identity provider, stores the user information. When AWS Cognito User Pools are used as the identity provider, the user directory of AWS Cognito stores the user login details, else its store in the identity providers storage.</p>
<p>The user directory is accessible by an SDK. This can be used by applications to access user profile.</p>
<p>AWS Cognito User pool provide:-</p>
<ul>
<li>Sign up and sign in service</li>
<li>A built-in customizable web-ui for user to register.</li>
<li>Social sign-in with social identity provider.</li>
<li>User directory management and user profile.</li>
<li>MFA.</li>
</ul>
<p>Once a user is authenticated, the application receives a JWT (JavaScript Web token). The next step of <strong>authorizing</strong> uses this JWT.</p>
<h3 id="configure-user-pool">Configure User Pool<a class="headerlink" href="#configure-user-pool" title="Permanent link">Â¶</a></h3>
<p>When you select AWS Cognito in AWS console you get this screen, asking to choose .</p>
<p><img alt="AWS Made Easy | AWS Cognito Choose " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-choose-02.png" title="AWS Made Easy | AWS Cognito Choose"/></p>
<p>Since you will configure the User Pool, lets choose the User Pool Option.</p>
<p><img alt="AWS Made Easy | AWS Cognito User Pool " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-01.png" title="AWS Made Easy | AWS Cognito User Pool"/></p>
<p>To Make life easier you can select the <strong>Review Defaults</strong>, and it could provide you with a good basic user pool. </p>
<p>You can also choose to configure each of these ten settings.</p>
<p><img alt="AWS Made Easy | AWS Cognito User Pool steps" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-steps.png" title="AWS Made Easy | AWS Cognito User Pool step"/></p>
<p>Customizing all the settings for user pool creation, would be beyond the scope of this Blog. Let's take these two approaches.</p>
<ul>
<li>Create a user pool with the default option.</li>
<li>Add an App to enable the hosted WebUI.</li>
</ul>
<h3 id="create-a-user-pool-default">Create a User Pool (Default)<a class="headerlink" href="#create-a-user-pool-default" title="Permanent link">Â¶</a></h3>
<ul>
<li>Step 1 : Select the "<strong>Create a user pool</strong>".</li>
<li>Step 2 : It provides us with this screen.</li>
</ul>
<p><img alt="AWS Made Easy | AWS Cognito User Pool " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-01.png" title="AWS Made Easy | AWS Cognito User Pool"/></p>
<ul>
<li>Step 3 : Provide a name for Pool, and press the <strong>Review Defaults</strong>.</li>
<li>Step 4 : On pressing the <strong>Review Defaults</strong>, you get this <strong>Review</strong> screen.</li>
</ul>
<p><img alt="AWS Made Easy | AWS Cognito User Pool Review " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-Review.png" title="AWS Made Easy | AWS Cognito User Pool Review"/></p>
<p>The review pages, tells us these important information.</p>
<ul>
<li>Pool Name</li>
<li>Email is a required attributes.</li>
<li>There is a password policies.</li>
<li>How the message's for AWS Cognito needs to be communicated.</li>
<li>MFA is enabled or not.</li>
<li>Tags are created or not</li>
<li>App Clients are registered or not.</li>
<li>Which are Triggers to configure. like pre sign-up, pre-authentication</li>
</ul>
<p>If you carefully watch the Review page and the steps to create a user pool, they match.</p>
<ul>
<li>Step 5 : Press the <strong>Create Pool</strong>, button and your User Pool is created.</li>
</ul>
<p><img alt="AWS Made Easy | AWS Cognito User Pool Created " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-Created.png" title="AWS Made Easy | AWS Cognito User Pool Created"/></p>
<p>Congrats on creating the default user pool. Now you should check out the Hosted UI provided by the AWS Cognito for sign-up and login.</p>
<h3 id="add-an-app-to-enable-the-hosted-web-ui">Add an App to Enable the Hosted Web UI<a class="headerlink" href="#add-an-app-to-enable-the-hosted-web-ui" title="Permanent link">Â¶</a></h3>
<p>AWS Cognito even goes a step ahead into offloading your user management work. It provides a user sign-in, login page as a hosted web. Let's see, how can you configure this.</p>
<p>You will use the <a href="#create-a-user-pool-default">default user pool</a> created before. Once you have created a User Pool, you can edit a lot of attributes provided here.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Attributes " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-attributes.png" title="AWS Made Easy AWS Cognito User Pool Attributes"/> </p>
<p>To Use the hosted WebUi, you will focus on the <strong>App Integration</strong> property of the user pool. </p>
<ul>
<li>Step 1: Select <strong>App Integration</strong> from Setting of User Pool.</li>
</ul>
<p><img alt="AWS Made Easy AWS Cognito User Pool App Integration " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-AppIntegration.png" title="AWS Made Easy AWS Cognito User Pool App Integration"/> </p>
<p>To get the Web Hosted UI, you have to use this configuration, if you have your own domain, provide your custom domain, else use the AWS domain.</p>
<ul>
<li>Step 2: Add Domain.</li>
</ul>
<p>On choosing the Add Domain option, you get this screen.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Add Domain " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-AddDomain.png" title="AWS Made Easy AWS Cognito User Pool Add Domain"/> </p>
<p>Enter the domain, you wish, and keep a note of this, you will require it later.</p>
<ul>
<li>Step 3 : Add <strong>App Client</strong> under <strong>General settings</strong></li>
</ul>
<p>Select the App Client under General Setting, so you can enter the app client attributes. The screen will look like this.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Add App Client " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-ChooseClient.png" title="AWS Made Easy AWS Cognito User Pool Add App Client"/> </p>
<p>You should select the <strong>Add an app client</strong> option. The screen will look like this.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Add App Client " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-ChooseClient-02.png" title="AWS Made Easy AWS Cognito User Pool Add App Client"/> </p>
<p>You should provide the name of the client, and de-select the option <strong>Generate client secret</strong>. This option can be used when you have a server side component to generate the client secret. Once the app client is created. We move to the Step 4.</p>
<ul>
<li>Step 4 App Client Settings:</li>
</ul>
<p>Select the App Client Setting, under App Integration. You will get a screen like this.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool App Client Settings" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-App-Client-Settings.png" title="AWS Made Easy AWS Cognito User Pool App Client Settings"/> </p>
<p>If you check the App Client details are already present, In the above screen, you have to select</p>
<ul>
<li>Cognito User Pool as the enabled identity providers.</li>
<li>Since you are testing, provide "<strong>http://localhost</strong>" as the callback URLs, this is for validation.</li>
<li>Choose <strong>Implicit Grant</strong>, in Allowed OAuth Flows.</li>
<li>Select All the allowed OAuth Scope, you want.</li>
</ul>
<p>Save the option.</p>
<ul>
<li>Step 5 :  Launch the WebHosted UI.</li>
</ul>
<p>At the bottom of the previous screen, there is an option for <strong>Launch Hosted UI</strong>. Use this option. You should get a sign-up page like this.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool WebHosted UI" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-WebHostedUI.png" title="AWS Made Easy AWS Cognito User Pool WebHosted UI"/> </p>
<p>Here is your simple web hosted a for Login and sign up. Though everything may not work. Just refer this as a guideline.</p>
<p>At this point you can use IAM roles for your application and this authentication to make your application function. But providing different level of authorization will still be the application's responsibility. If you want to hand over this part also then move to Identity Pool.</p>
<h2 id="identity-pool">Identity Pool<a class="headerlink" href="#identity-pool" title="Permanent link">Â¶</a></h2>
<p>AWS Cognito Identity pool does both Authentication and authorization, but in a different way. </p>
<p>The AWS Cognito Identity pool uses Federated identity for authenticating users. Different identity federation can be provided by</p>
<ul>
<li>Social Identity Provider</li>
<li>SAML Identity Provider</li>
<li>OpenID Connect Provider</li>
<li>Amazon Cognito User Pool.</li>
</ul>
<p>Kindly note, the AWS Identity pool is the service provider in the identity federation paradigm. It uses the identity providers to authenticate the user. </p>
<p>Once these identity providers do their magic (authentication), they inform the Identity pool by issuing a type of token. On receiving the token, identity pool will authorize users to a different level of access.</p>
<p>Identity pool will provide the user with different level of access by using IAM Roles. </p>
<p>Identity pool uses <a href="https://www.archerimagine.com/articles/aws/aws-sts.html">AWS STS</a>, service to grant the users credentials to access AWS resources.</p>
<h3 id="configure-identity-pool">Configure Identity Pool<a class="headerlink" href="#configure-identity-pool" title="Permanent link">Â¶</a></h3>
<p>Configuring Identity Pool is a 2 Step Process. </p>
<p>Select Manage identity Pool from the screen when you <a href="#configure-user-pool">created the user pool</a>. You will be greeted with this screen.</p>
<ul>
<li>Step 1 : Create Identity Pool</li>
</ul>
<p><img alt="AWS Made Easy AWS Cognito Identity pool configure" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-IdentityPool-Configure.png" title="AWS Made Easy AWS Cognito Identity pool configure"/> </p>
<p>In this step you have to configure 3 things apart from providing a name to the identity pool.</p>
<ul>
<li>Unauthenticated Identities<ul>
<li>AWS Cognitio provides support for Guest user. It generates a unique ID for each guest.</li>
<li>In the future if they register, the complete session is saved into the user directory.</li>
</ul>
</li>
<li>Authentication flow settings<ul>
<li>We can select a basic or an enhanced authentication flow.</li>
</ul>
</li>
<li>Authentication providers<ul>
<li>We have All the Social Identity providers along with OpenID and SAML.</li>
<li>We will use Cognito, which needs us to provide <strong>user pool id</strong> and <strong>App Client ID</strong>, which was <a href="#configure-user-pool">created during the user pool.</a></li>
</ul>
</li>
</ul>
<p>Once you fill the required details, let's proceed to the most important step in AWS Cognito, providing Permissions.</p>
<ul>
<li>Step 2 : Set Permissions </li>
</ul>
<p>This is the screen, as you can guess, can provide two types of IAM Role to both Authenticated and Unauthenticated user. The IAM Role will be created here.</p>
<p><img alt="AWS Made Easy AWS Cognito Identity pool IAM Role" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-IdentityPool-IAMRole.png" title="AWS Made Easy AWS Cognito Identity pool IAM Role"/> </p>
<p>Here is the IAM policy statement for Authenticated Users in AWS Cognito Identity pool.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"Version"</span><span class="p">:</span> <span class="s2">"2012-10-17"</span><span class="p">,</span>
  <span class="nt">"Statement"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"Effect"</span><span class="p">:</span> <span class="s2">"Allow"</span><span class="p">,</span>
      <span class="nt">"Action"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"mobileanalytics:PutEvents"</span><span class="p">,</span>
        <span class="s2">"cognito-sync:*"</span><span class="p">,</span>
        <span class="s2">"cognito-identity:*"</span>
      <span class="p">],</span>
      <span class="nt">"Resource"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"*"</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Here is the IAM policy statement for UnAuthenticated Users in AWS Cognito Identity pool.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"Version"</span><span class="p">:</span> <span class="s2">"2012-10-17"</span><span class="p">,</span>
  <span class="nt">"Statement"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"Effect"</span><span class="p">:</span> <span class="s2">"Allow"</span><span class="p">,</span>
      <span class="nt">"Action"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"mobileanalytics:PutEvents"</span><span class="p">,</span>
        <span class="s2">"cognito-sync:*"</span>
      <span class="p">],</span>
      <span class="nt">"Resource"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"*"</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Once you are ready, just select <strong>Allow</strong>. You will have your AWS Cognito Identity Pool created, just use this option for integrating with the SDK you want to use.</p>
<ul>
<li>Getting Started with Amazon Cognito</li>
</ul>
<p><img alt="AWS Made Easy AWS Cognito Identity pool configured" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-IdentityPool-Configured.png" title="AWS Made Easy AWS Cognito Identity pool configured"/></p>
<h2 id="python-code-for-aws-cognito">Python Code for AWS Cognito<a class="headerlink" href="#python-code-for-aws-cognito" title="Permanent link">Â¶</a></h2>
<p>You might be thinking, how does it all come together. You have a user pool and an identity pool. You also created the Web Hosted UI. You might be thinking how do I use it together. </p>
<p>If you like video, to learn, visit the <a href="https://www.youtube.com/playlist?list=PLLhEJK7fQIxDSD-5FgBuegurOjzGwjtzw">AWS Cognito Python tutorials</a> by <strong>Paris Nakita Kejser</strong>. This is the only AWS Cognito's in Python video tutorial.</p>
<p>We will just pick two important flow from the above tutorials, as some changes need to be done in the code mentioned in the video.</p>
<h3 id="sign-up-using-aws-cognito-python-sdk-boto3">Sign-Up using AWS Cognito, Python SDK Boto3<a class="headerlink" href="#sign-up-using-aws-cognito-python-sdk-boto3" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>

<span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>

<span class="c1"># read the .env-sample, to load the environment variable.</span>
<span class="n">dotenv_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">".env-sample"</span><span class="p">)</span>
<span class="n">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="n">username</span> <span class="o">=</span> <span class="s2">"abc.xyz@gmail.com"</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">"#Abc1234"</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">"cognito-idp"</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s2">"&lt;region-name&gt;"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">))</span>

<span class="c1"># The below code, will do the sign-up</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">sign_up</span><span class="p">(</span>
    <span class="n">ClientId</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">),</span>
    <span class="n">Username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">Password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
    <span class="n">UserAttributes</span><span class="o">=</span><span class="p">[{</span><span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"email"</span><span class="p">,</span> <span class="s2">"Value"</span><span class="p">:</span> <span class="n">username</span><span class="p">}],</span>
<span class="p">)</span>
</code></pre></div>
<p>There are certain prerequisites for this code to work.</p>
<p>Create a file called <code>.env-sample</code>, in the current directory where you have the above code. In this file you should provide the macro <code>COGNITO_USER_CLIENT_ID</code>, with the client ID from <strong>General Settings</strong> &gt; <strong>App Client</strong> &gt; <strong>App client id</strong>.</p>
<p>The above will be picked using the <code>dotenv</code> module. </p>
<p>When you execute the above code, you will get this back as a response,</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
   <span class="nt">"UserConfirmed"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
   <span class="nt">"CodeDeliveryDetails"</span><span class="p">:{</span>
      <span class="nt">"Destination"</span><span class="p">:</span><span class="s2">"a***@g***.com"</span><span class="p">,</span>
      <span class="nt">"DeliveryMedium"</span><span class="p">:</span><span class="s2">"EMAIL"</span><span class="p">,</span>
      <span class="nt">"AttributeName"</span><span class="p">:</span><span class="s2">"email"</span>
   <span class="p">},</span>
   <span class="nt">"UserSub"</span><span class="p">:</span><span class="s2">"123456-d094-44e0-942d-789012134"</span><span class="p">,</span>
   <span class="nt">"ResponseMetadata"</span><span class="p">:{</span>
      <span class="nt">"RequestId"</span><span class="p">:</span><span class="s2">"123-1842-4027-345-789abc09234"</span><span class="p">,</span>
      <span class="nt">"HTTPStatusCode"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span>
      <span class="nt">"HTTPHeaders"</span><span class="p">:{</span>
         <span class="nt">"date"</span><span class="p">:</span><span class="s2">"Mon, 19 Apr 2021 05:11:44 GMT"</span><span class="p">,</span>
         <span class="nt">"content-type"</span><span class="p">:</span><span class="s2">"application/x-amz-json-1.1"</span><span class="p">,</span>
         <span class="nt">"content-length"</span><span class="p">:</span><span class="s2">"175"</span><span class="p">,</span>
         <span class="nt">"connection"</span><span class="p">:</span><span class="s2">"keep-alive"</span><span class="p">,</span>
         <span class="nt">"x-amzn-requestid"</span><span class="p">:</span><span class="s2">"123-1842-4027-345-789abc09234"</span>
      <span class="p">},</span>
      <span class="nt">"RetryAttempts"</span><span class="p">:</span><span class="mi">0</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>If you check the <strong>General Setting</strong> &gt; <strong>User and groups</strong>, the user will be unconfirmed, you will see this, and get a verification code in your email. </p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Unconfirmed user" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-newUser.png" title="AWS Made Easy AWS Cognito User Pool Unconfirmed user"/></p>
<h3 id="confirmation-code-using-aws-cognito-python-sdk-boto3">Confirmation Code using AWS Cognito, Python SDK Boto3<a class="headerlink" href="#confirmation-code-using-aws-cognito-python-sdk-boto3" title="Permanent link">Â¶</a></h3>
<p>Now you are an unconfirmed user, you have got the confirmation code in the mail. Let's find a way to make you a confirm user. Here is the code to do that.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>

<span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>

<span class="n">dotenv_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">".env-sample"</span><span class="p">)</span>
<span class="n">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="n">username</span> <span class="o">=</span> <span class="s2">"abc.xyz@gmail.com"</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">"cognito-idp"</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s2">"&lt;region-id&gt;"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">))</span>
<span class="n">confirm_code</span> <span class="o">=</span> <span class="s2">"112418"</span>

<span class="c1"># Below API sends the confirmation code.</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">confirm_sign_up</span><span class="p">(</span>
    <span class="n">ClientId</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">),</span>
    <span class="n">Username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">ConfirmationCode</span><span class="o">=</span><span class="n">confirm_code</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>
<p>Post this the response is this.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
   <span class="nt">"ResponseMetadata"</span><span class="p">:{</span>
      <span class="nt">"RequestId"</span><span class="p">:</span><span class="s2">"3412d123-c175-4571-91a5-12349c14a9bd"</span><span class="p">,</span>
      <span class="nt">"HTTPStatusCode"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span>
      <span class="nt">"HTTPHeaders"</span><span class="p">:{</span>
         <span class="nt">"date"</span><span class="p">:</span><span class="s2">"Mon, 19 Apr 2021 05:22:10 GMT"</span><span class="p">,</span>
         <span class="nt">"content-type"</span><span class="p">:</span><span class="s2">"application/x-amz-json-1.1"</span><span class="p">,</span>
         <span class="nt">"content-length"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span>
         <span class="nt">"connection"</span><span class="p">:</span><span class="s2">"keep-alive"</span><span class="p">,</span>
         <span class="nt">"x-amzn-requestid"</span><span class="p">:</span><span class="s2">"3412d123-c175-4571-91a5-12349c14a9bd"</span>
      <span class="p">},</span>
      <span class="nt">"RetryAttempts"</span><span class="p">:</span><span class="mi">0</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>If you again go and check in <strong>General Setting</strong> &gt; <strong>User and groups</strong>, the user should be confirmed now.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool confirmed user" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-confirm-user.png" title="AWS Made Easy AWS Cognito User Pool confirmed user"/></p>
<p>You have successfully created your first app user.</p>
<h3 id="login-and-getting-user-details-using-aws-cognito">Login and Getting User details using AWS Cognito<a class="headerlink" href="#login-and-getting-user-details-using-aws-cognito" title="Permanent link">Â¶</a></h3>
<p>You have now successfully created a new user, and also confirmed the user. The next logical step will be to Login and get some user details from AWS Cognito.</p>
<p>This you can achieve in this manner.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>

<span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>

<span class="n">dotenv_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">".env-sample"</span><span class="p">)</span>
<span class="n">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="n">username</span> <span class="o">=</span> <span class="s2">"abc.xyz@gmail.com"</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">"#Abc1234"</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">"cognito-idp"</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s2">"ap-south-1"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">))</span>

<span class="c1"># Initiating the Authentication, </span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">initiate_auth</span><span class="p">(</span>
    <span class="n">ClientId</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"COGNITO_USER_CLIENT_ID"</span><span class="p">),</span>
    <span class="n">AuthFlow</span><span class="o">=</span><span class="s2">"USER_PASSWORD_AUTH"</span><span class="p">,</span>
    <span class="n">AuthParameters</span><span class="o">=</span><span class="p">{</span><span class="s2">"USERNAME"</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s2">"PASSWORD"</span><span class="p">:</span> <span class="n">password</span><span class="p">},</span>
<span class="p">)</span>

<span class="c1"># From the JSON response you are accessing the AccessToken</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="c1"># Getting the user details.</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">"AuthenticationResult"</span><span class="p">][</span><span class="s2">"AccessToken"</span><span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>
<p>Please note sometime you may get this error</p>
<div class="highlight"><pre><span></span><code>botocore.errorfactory.InvalidParameterException: An error occurred <span class="o">(</span>InvalidParameterException<span class="o">)</span> when calling the InitiateAuth operation: USER_PASSWORD_AUTH flow not enabled <span class="k">for</span> this client
</code></pre></div>
<p>If you get this error, please check in <strong>General Settings</strong> &gt; <strong>App Client</strong> &gt; <strong>Auth Flow Configuration</strong></p>
<p>You should have this option selected <code>ALLOW_USER_PASSWORD_AUTH</code> selected, or just for testing enable all the option like this.</p>
<p><img alt="AWS Made Easy AWS Cognito User Pool Authenticate user" src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-UserPool-auth-flow.png" title="AWS Made Easy AWS Cognito User Pool Authenticate user"/></p>
<p>You will get a JSON as a response of <code>initiate_auth</code>, you have to just pick the <code>AccessToken</code> from it and pass it to <code>get_user</code>. Once that is done, you will get this as a response.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
   <span class="nt">"Username"</span><span class="p">:</span><span class="s2">"abc.xyz@gmail.com"</span><span class="p">,</span>
   <span class="nt">"UserAttributes"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">"Name"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span>
         <span class="nt">"Value"</span><span class="p">:</span><span class="s2">"1234eb31-d094-44e0-942d-50a1234a66b"</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="nt">"Name"</span><span class="p">:</span><span class="s2">"email_verified"</span><span class="p">,</span>
         <span class="nt">"Value"</span><span class="p">:</span><span class="s2">"true"</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="nt">"Name"</span><span class="p">:</span><span class="s2">"email"</span><span class="p">,</span>
         <span class="nt">"Value"</span><span class="p">:</span><span class="s2">"abc.xyz@gmail.com"</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="nt">"ResponseMetadata"</span><span class="p">:{</span>
      <span class="nt">"RequestId"</span><span class="p">:</span><span class="s2">"xxxxxxx-1231-4f1c-b881-dcf10c54e576"</span><span class="p">,</span>
      <span class="nt">"HTTPStatusCode"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span>
      <span class="nt">"HTTPHeaders"</span><span class="p">:{</span>
         <span class="nt">"date"</span><span class="p">:</span><span class="s2">"Mon, 19 Apr 2021 08:26:10 GMT"</span><span class="p">,</span>
         <span class="nt">"content-type"</span><span class="p">:</span><span class="s2">"application/x-amz-json-1.1"</span><span class="p">,</span>
         <span class="nt">"content-length"</span><span class="p">:</span><span class="s2">"213"</span><span class="p">,</span>
         <span class="nt">"connection"</span><span class="p">:</span><span class="s2">"keep-alive"</span><span class="p">,</span>
         <span class="nt">"x-amzn-requestid"</span><span class="p">:</span><span class="s2">"xxxxxxx-1231-4f1c-b881-dcf10c54e576"</span>
      <span class="p">},</span>
      <span class="nt">"RetryAttempts"</span><span class="p">:</span><span class="mi">0</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This is enough to understand how AWS Cognito works, you can even follow the video for Forgot Password flow also.</p>
<h2 id="aws-cognito-sync">AWS Cognito Sync<a class="headerlink" href="#aws-cognito-sync" title="Permanent link">Â¶</a></h2>
<p>The official documentation of AWS Cognito Sync is.</p>
<blockquote>
<p>Amazon Cognito Sync is an AWS service and client library that enables cross-device syncing of application-related user data. </p>
</blockquote>
<p>Few use cases of the AWS Cognito Syncs are.</p>
<ul>
<li>Synchronize the user profile data across the mobile devices and the web, without a back-end.</li>
<li>The application can cache data locally if there is no connectivity, and once you get connected the data are synced.</li>
<li>The AWS Identity pool is required to use the AWS Cognito Sync.</li>
</ul>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">Â¶</a></h2>
<p>AWS Cognito is a service to use if you want to offload complete user management tasks to AWS. This will cost a little, but you can continue to focus on the good things of your application and ignore the mundane activity of user management. </p>
<p>You can rest assured that AWS will take responsibility of upgrading the service for latest security patches, and you are not exposed to such security flaws.</p>
<p>AWS Cognito User pools and Identity pools are the two brothers of AWS Cognito, shouldering the responsibility of authentication and authorization. Using IAM roles, you can provide very fine grained access to users.</p>
<p>Integration using SAML, OIDC also help in using 3rd party vendors as your Identity Providers. Even the Guest users can be assigned a unique ID which can later be saved to a user profile, if he registers.</p>
<p>Though you may never use the AWS Cognito provided Web Hosted UI, but it makes a great point in AWS service, how thought out their services are.</p>
<p>The AWS Boto3 SDK can use the AWS Cognito APIs to provide the complete functionality of User Management in your application with the most minimal amount of code.</p>
<p>This would have given you a fair understanding of AWS Cognito Service. Let me know if you tried the Python Code to login the user.</p>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">Â¶</a></h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=abTy-Yyo6lI">Introduction to Amazon Cognito - User Authentication and Mobile Data Service on AWS</a></li>
<li><a href="https://www.youtube.com/watch?v=OAR4ZHP8DEg">Authentication for Your Applications: Getting Started with Amazon Cognito - AWS Online Tech Talks</a></li>
<li><a href="https://www.youtube.com/watch?v=jTu--LpjA18">AWS Cognito | Amazon Cognito | AWS Tutorial for Beginners | AWS Training | Edureka</a></li>
<li><a href="https://www.youtube.com/watch?v=tAUmz94O2Qo">Fine-grained Access Control with Amazon Cognito Identity Pools</a></li>
<li><a href="https://www.smashingmagazine.com/2017/08/user-authentication-web-ios-apps-aws-cognito-part-1/">User Authentication For Web And iOS Apps With AWS Cognito (Part 1)</a></li>
<li><a href="https://aws.amazon.com/premiumsupport/knowledge-center/cognito-user-pools-identity-pools/">What's the difference between Amazon Cognito user pools and identity pools?</a></li>
<li><a href="https://thenewstack.io/understanding-aws-cognito-user-and-identity-pools-for-serverless-apps/">Understanding AWS Cognito User and Identity Pools for Serverless Apps</a></li>
<li><a href="https://securityboulevard.com/2020/05/iam-101-series-federation-and-federated-sso/">IAM 101 Series: Federation and Federated SSO </a></li>
<li><a href="https://security.stackexchange.com/questions/13803/what-is-the-difference-between-federated-login-and-single-sign-on">What is the difference between Federated Login and Single Sign On?</a></li>
<li><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html">What Is Amazon Cognito?</a></li>
<li><a href="https://aws.amazon.com/identity/federation/">Identity federation in AWS</a></li>
<li><a href="https://www.youtube.com/watch?v=KWjgiNgDfwI">Deep Dive on User Sign-up and Sign-in with Amazon Cognito</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLLhEJK7fQIxDSD-5FgBuegurOjzGwjtzw">Learning AWS Cognito with Python</a></li>
<li><a href="https://stackoverflow.com/questions/49000676/aws-cognito-authentication-user-password-auth-flow-not-enabled-for-this-client">AWS Cognito Authentication USER_PASSWORD_AUTH flow not enabled for this client</a></li>
<li><a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/cognito-idp.html#CognitoIdentityProvider.Client.admin_confirm_sign_up">Python Boto3 for AWS Cognito</a></li>
<li><a href="https://stackoverflow.com/questions/41546883/what-is-the-use-of-python-dotenv">What is the use of python-dotenv?</a></li>
<li><a href="https://auth0.com/docs/flows">Authentication and Authorization Flows</a></li>
</ul>
<h2 id="info-graphics">Info graphics<a class="headerlink" href="#info-graphics" title="Permanent link">Â¶</a></h2>
<h3 id="authentication-vs-authorization">Authentication Vs Authorization<a class="headerlink" href="#authentication-vs-authorization" title="Permanent link">Â¶</a></h3>
<table>
<thead>
<tr>
<th align="center">Authentication</th>
<th align="center">Authorization</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Validate the user</td>
<td align="center">provide access to resources</td>
</tr>
<tr>
<td align="center">Passwords, biometrics, OTP used for authentication.</td>
<td align="center">Policy and rules are used to grant access.</td>
</tr>
<tr>
<td align="center">First Step in IAM</td>
<td align="center">Follows authentication, (exception - Guest user)</td>
</tr>
<tr>
<td align="center">OIDC 2.0</td>
<td align="center">OAuth 2.0</td>
</tr>
<tr>
<td align="center">ID Token are used</td>
<td align="center">Access tokens are used</td>
</tr>
<tr>
<td align="center">User has some control</td>
<td align="center">User have no control</td>
</tr>
</tbody>
</table>
<hr/>
<p><img alt="AWS Made Easy | Authentication Vs Authorization " src="https://www.archerimagine.com/images/aws/IAM/Authentication-Vs-Authorization.png" title="AWS Made Easy | Authentication Vs Authorization"/></p>
<h3 id="aws-cognito-user-pool-vs-identity-pool">AWS Cognito User Pool Vs Identity Pool<a class="headerlink" href="#aws-cognito-user-pool-vs-identity-pool" title="Permanent link">Â¶</a></h3>
<table>
<thead>
<tr>
<th align="center">User Pool</th>
<th align="center">Identity Pool</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Authentication</td>
<td align="center">Authorization</td>
</tr>
<tr>
<td align="center">User Management</td>
<td align="center">IAM Roles for Access</td>
</tr>
<tr>
<td align="center">Sign-Up &amp; Login</td>
<td align="center">Fine Grain Access</td>
</tr>
<tr>
<td align="center">Provide WebHosted UI</td>
<td align="center">Complete back end access</td>
</tr>
<tr>
<td align="center">User Pool is charged</td>
<td align="center">Identity pool is free</td>
</tr>
<tr>
<td align="center">No Guest user</td>
<td align="center">Guest User</td>
</tr>
</tbody>
</table>
<hr/>
<p><img alt="AWS Made Easy | AWS Cognito User Pool vs Identity Pool " src="https://www.archerimagine.com/images/aws/IAM/AWS-Cognito-User-Pool-Vs-Identity-Pool.png" title="AWS Made Easy | AWS Cognito User Pool vs Identity Pool"/></p>
<h3 id="using-aws-cognito-user-pool-with-identity-pool">Using AWS Cognito User Pool With Identity Pool<a class="headerlink" href="#using-aws-cognito-user-pool-with-identity-pool" title="Permanent link">Â¶</a></h3>
<p>When you have both AWS Cognito user pool and identity pool, they can function together with each other to provide access to user for AWS resources. These can be done in three steps.</p>
<ol>
<li>The Application uses the AWS Cognito User Pool, to authenticate, and gets tokens in return.</li>
<li>The application exchanges this tokes with the AWS Cognito Identity Pool and received AWS credentials in returns.</li>
<li>Use the AWS Credentials, and use to access the AWS resources. </li>
</ol>
<p><img alt="AWS Made Easy | AWS Cognito User Pool with Identity Pool " src="https://www.archerimagine.com/images/aws/IAM/UserPoolWith-Identity.png" title="AWS Made Easy | AWS Cognito User Pool with Identity Pool"/></p>
<hr/>
<p>When you are using AWS Cognito User Pool With Identity Pool, the flow is explained above.</p>
<ol>
<li>The application authenticates and get token from AWS Cognito User Pool as a JWT Token.</li>
<li>This JWT Token is then passed on to AWS Cognito Identity Pool, which returns an IAM Roles for the user.</li>
<li>Once the IAM role is assigned, the user can access any resources on AWS.</li>
</ol>
<hr/>
<p><a href="https://bit.ly/3f9SUH4"><img alt="Subscribe To NewsLetter" src="https://www.archerimagine.com/images/Email-Subscribers.png"/></a></p>

             


<div class="applause_button">
    <applause-button url=https://www.archerimagine.com/articles/aws/aws-cognito-tutorials.html> </applause-button>
</div>

 
                <p id="post-share-links">
    Spread the word....
      <a href="https://twitter.com/intent/tweet?text=How%20to%20start%20using%20AWS%20Cognito%20Authorize%2C%20Authenticate%20and%20Federate%20user%20in%20%5B2021%5D&url=https%3A//www.archerimagine.com/articles/aws/aws-cognito-tutorials.html&via=animeshkbhadra&hashtags=aws,cloud,aws-cognito" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
 â       <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.archerimagine.com/articles/aws/aws-cognito-tutorials.html" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
 â       <a href="mailto:?subject=How%20to%20start%20using%20AWS%20Cognito%20Authorize%2C%20Authenticate%20and%20Federate%20user%20in%20%5B2021%5D&amp;body=https%3A//www.archerimagine.com/articles/aws/aws-cognito-tutorials.html" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>

            
            







            <hr/>
<section>
    <h2>Related Posts</h2>
<ul class="related-posts-list">
<li><a href="https://www.archerimagine.com/articles/aws/aws-ec2-tutorial.html" title="The Insider&#39;s Guide to AWS EC2 - Create first EC2 Instance in [2021]">The Insider's Guide to AWS EC2 <small>Create first EC2 Instance in [2021]</small></a></li>
<li><a href="https://www.archerimagine.com/articles/aws/aws-ami-tutorial.html" title="The complete beginner&#39;s guide to AWS AMIs - Amazon Machine Image [2021]">The complete beginner's guide to AWS AMIs <small>Amazon Machine Image [2021]</small></a></li>
<li><a href="https://www.archerimagine.com/articles/aws/aws-ec2-instance-type-tutorial.html" title="The unconventional guide to AWS EC2 instance types.">The unconventional guide to AWS EC2 instance types.</a></li>
<li><a href="https://www.archerimagine.com/articles/aws/aws-ec2-tenancy-and-pricing-tutorial.html" title="Save 72% of AWS EC2 cost with these pricing and tenancy options.">Save 72% of AWS EC2 cost with these pricing and tenancy options.</a></li>
<li><a href="https://www.archerimagine.com/articles/aws/aws-elastic-ip-tutorial.html" title="Doing Elastic Ips the Right Way">Doing Elastic Ips the Right Way</a></li>
</ul>
<hr />
</section>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">Â« <a href="https://www.archerimagine.com/articles/aws/aws-inspector-tutorials.html" title="Previous: The AWS Inspector Blog of your dreams - The secret agent in cloud [2021].">The AWS Inspector Blog of your dreams <small class="subtitle">The secret agent in cloud [2021].</small></a></li>
                <li class="next-article"><a href="https://www.archerimagine.com/articles/aws/aws-ec2-tutorial.html" title="Next: The Insider&#39;s Guide to AWS EC2 - Create first EC2 Instance in [2021]">The Insider's Guide to AWS EC2 <small class="subtitle">Create first EC2 Instance in [2021]</small></a> Â»</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~14 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-04-17T14:16:23+05:30">Sat 17 April 2021</time>
<h4>Last Updated</h4>
<time datetime="2021-05-28T16:54:39+05:30">May 28, 2021</time>

        <h4>AWS IAM Tutorials</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://www.archerimagine.com/articles/aws/general-aws.html" title="AWS - Shared Responsibility & Global Infrastructure.">Part 1: AWS - Shared Responsibility & Global Infrastructure.</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-iam-introduction.html" title="AWS Made Easy | IAM Introduction">Part 2: AWS Made Easy | IAM Introduction</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-iam-policy.html" title="AWS Made Easy | IAM Policy">Part 3: AWS Made Easy | IAM Policy</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-iam-users.html" title="AWS Made Easy | IAM Users">Part 4: AWS Made Easy | IAM Users</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-global-Infrastructure.html" title="Global Infrastructure comparison of AWS, GCP and Azure. Updated 2020">Part 5: Global Infrastructure comparison of AWS, GCP and Azure. Updated 2020</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-iam-roles.html" title="A foolproof guide to AWS IAM Roles">Part 6: A foolproof guide to AWS IAM Roles</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-sts.html" title="Doing AWS STS the right way.">Part 7: Doing AWS STS the right way.</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-iam-api-keys.html" title="Who really uses AWS IAM API keys?">Part 8: Who really uses AWS IAM API keys?</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-kms.html" title="The Dummies Guide to AWS KMS.">Part 9: The Dummies Guide to AWS KMS.</a>
            </li>
            <li >
            <a href="https://www.archerimagine.com/articles/aws/aws-inspector-tutorials.html" title="The AWS Inspector Blog of your dreams">Part 10: The AWS Inspector Blog of your dreams</a>
            </li>
            <li  class="active-part">
            Part 11: How to start using AWS Cognito
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://www.archerimagine.com/categories#aws-ref">aws</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://www.archerimagine.com/tags#aws-ref">aws
                    <span class="superscript">16</span>
</a></li>
                <li><a href="https://www.archerimagine.com/tags#aws-cognito-ref">aws-cognito
                    <span class="superscript">1</span>
</a></li>
                <li><a href="https://www.archerimagine.com/tags#cloud-ref">cloud
                    <span class="superscript">16</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/archeranimesh" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.facebook.com/animeshkbhadra" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Facebook" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1877f2"/><path d="M355.6 330l11.4-74h-71v-48c0-20.2 9.9-40 41.7-40H370v-63s-29.3-5-57.3-5c-58.5 0-96.7 35.4-96.7 99.6V256h-65v74h65v182h80V330h59.6z" fill="#fff"/></svg>
    </a>
    <a href="https://www.reddit.com/user/archerimagine/" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Reddit" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f40"/><g fill="#fff"><ellipse cx="256" cy="307" rx="166" ry="117"/><circle cx="106" cy="256" r="42"/><circle cx="407" cy="256" r="42"/><circle cx="375" cy="114" r="32"/></g><g stroke-linecap="round" stroke-linejoin="round" fill="none"><path d="m256 196 23-101 73 15" stroke="#fff" stroke-width="16"/><path d="m191 359c33 25 97 26 130 0" stroke="#f40" stroke-width="13"/></g><g fill="#f40"><circle cx="191" cy="287" r="31"/><circle cx="321" cy="287" r="31"/></g></svg>
    </a>
    <a href="https://twitter.com/animeshkbhadra" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
    </a>
</div>
            



<!-- Begin MailChimp Signup Form -->
<div id="mc-embed-signup">
<form action="//archerimagine.us15.list-manage.com/subscribe/post?u=e95cf93fc00f17a742b9480eb&amp;id=b690f10a78" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<h4>Email Newsletter</h4>
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Enter your email..." required>
<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div>
<!--End mc_embed_signup-->




            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>

    <div>
        <span class="site-name">Archer Imagine</span> - Anyone can do my job, but no one can be me. Harvey
    </div>



    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            
        <script src="https://code.jquery.com/jquery.min.js"></script>
        
        <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        
        <script src="https://www.archerimagine.com/theme/js/elegant.prod.9e9d5ce754.js"></script>
        
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

        
    <!--
        <script defer src="https://my.hellobar.com/0b8d4f8c5d8236e3cfef139b484c76d42822714a.js" type="text/javascript" charset="utf-8" async="async"></script>
        <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/e95cf93fc00f17a742b9480eb/16be0e7e213bab86a6795bec4.js");</script>
        <script>
        !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
        },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
        a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
        // Insert Twitter Pixel ID and Standard Event data below
        twq('init','o648l');
        twq('track','PageView');
        </script>
    
    <script async>(function(s,u,m,o,j,v){j=u.createElement(m);v=u.getElementsByTagName(m)[0];j.async=1;j.src=o;j.dataset.sumoSiteId='3bce642f377979511f2addc6af908c7b854c74137d5a52ca3f2b996bb51bfa0c';v.parentNode.insertBefore(j,v)})(window,document,'script','//load.sumo.com/');</script>
    -->
    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>